---
version: "0.1"
retryOnFailure: true
maxRetries: 1
defaultReports: true
matrix:
  os: [win,linux]
  browser: [

    "MicrosoftEdge:latest:Windows10@lambdatest",
    "chrome:108:Windows10@lambdatest",
    "pw-firefox:latest@lambdatest"
    ]
  methods:
    [
      tests/sample.spec.ts,
      tests/pageTitle.spec.ts,
      tests/searchbox.spec.ts,
      verifyMsg.spec.ts
    ]
runson: ${matrix.os}
tunnel: true
mergeArtifacts: true

uploadArtefacts:
 - name: screenshots
   path:
    - test-results

report: true
partialReports:
 location: playwright-report
 type: html
 frameworkName: playwright

pre:
  - npm install
  - npx playwright install
cacheKey: '{{ checksum "package-lock.json" }}'
cacheDirectories:
  - node_modules
testSuites:
  - npx playwright test --reporter=html --project=$browser $methods 